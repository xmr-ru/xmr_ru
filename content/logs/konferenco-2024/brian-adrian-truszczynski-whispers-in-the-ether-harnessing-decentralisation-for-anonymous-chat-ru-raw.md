---
title: "Брайан и Эдриан Трущински - Шёпот в эфире - роль децентрализации для организации анонимного чата"
date: "2024-06-07"
categories:
  - "Стенограмма"
tags:
  - "MoneroKon 2024"
lead: "Monero Konferenco 2024 #MoneroKon2024 Прага"
pager: true
toc: false
sidebar: "right"
---

{{< youtube id="O7Q4apltU2s" autoplay="false" >}}

---

_**Аннотация выступления**_

В эпоху, когда вопросы конфиденциальности стоят остро, а централизованные платформы часто не справляются со своей задачей, появление децентрализованных, безопасных чат-систем предлагает убедительную альтернативу. Мы рассмотрим, как эти технологии позволяют пользователям вести конфиденциальные беседы, не нарушая их частную жизнь. На примерах мы покажем преимущества и проблемы, связанные с использованием и адаптацией децентрализованной инфраструктуры Tari для создания защищенной чат-системы. Небольшой алкогольный магазин моего друга теперь принимает Monero (XMR) - реальное внедрение криптовалют!

_**Стенограмма выступления:**_

_**Эдриан:**_ Начнём с короткого отказа от ответственности. Это так сказать вводная лекция, и мы упростим некоторые вещи и не станем вдаваться в подробности, чтобы сделать наше выступление более доступным для тех, кто только начинает знакомиться с криптовалютным сообществом.

И сначала представимся: меня зовут Эдриан, я ведущий разработчик мобильного приложения Tari Aurora, являющегося мобильным кошельком токена Tari. Также здесь присутствует Брайан, разработчик Rust, который работает над нашим основным проектом - Tari. Часы тикают, и нам пора приступать к нашей презентации.

Мы живем в эпоху кризиса онлайн-коммуникации. С одной стороны, такие сервисы, как Facebook и Google, постоянно проверяют наши сообщения и связанные с ними метаданные, чтобы извлечь из них какую-то информацию. С другой стороны, правительства и международные организации пытаются принять законы, например, чтобы исключить шифрование сообщений мессенджерами или внедрить в них бэкдор. В таких ситуациях они фактически создают для себя окно в нашу жизнь, в наш дом, и мы не можем от этого защититься.

Конечно, существуют приложения, мобильные приложения для обмена сообщениями, ориентированные на обеспечение приватности. Signal и Apple iMessages используют шифрование, устойчивое даже к квантовым вычислениям. Но компании всё так же подвержены внешнему давлению. Поэтому мы время от времени слышим о подобных законах и пытаемся уйти от приложений, в которых были обнаружены бэкдоры или другие угрозы безопасности. Но я считаю, что мы должны перестать просто избегать их. Вместо этого мы должны попытаться найти более устойчивое решение. И я думаю, попытка создать некий децентрализованный мессенджер является верным направлением.

Технически, чтобы создать простой децентрализованный мессенджер требуется всего несколько вещей. Во-первых, нужно избавиться от проблемы под названием "сервис". Использование сервиса значительно всё упрощает, но в то же время он имеет потенциально уязвимые места, которые могут привести к утечке данных или давлению со стороны внешних организаций. Поэтому от него необходимо избавиться в обязательном порядке.

Далее следует проблема, связанная со сложностью поиска других пользователей, с которыми хотим общаться в сети, поскольку у нас нет ничего, что помогло бы делать это. А, между тем, найти пользователя в сети довольно непросто.

Как известно, интернет - довольно дикое место, где все сети скрыты определёнными настройками. Большинство устройств используют динамические IP-адреса, которые со временем меняются. А у многих пользователей доступ к Интернету ограничивается брандмауэром или каким-то другим образом. Всё будет намного проще, если мы поместим всех, кто хочет общаться с другими пользователями, на один сетевой уровень.

К счастью, здесь есть несколько вариантов, самым популярным из которых является Tor. Tor не только помещает всех на один простой сетевой уровень, но и определяет способ обработки пакетов, проходящих через сеть. Собственно, это и обеспечивает дополнительный уровень безопасности.

И давайте вспомним, как работает Tor. Если вы хотите поговорить или отправить какие-либо данные другому человеку, вам необходимо установить соединение. Такое соединение между вами и получателем должно иметь три узла. Вы получаете открытые ключи для этих узлов и трижды шифруете данные с их помощью, создавая тем самым три уровня шифрования, и передаёте данные первому узлу. Первый узел может снять только один уровень шифрования, а затем передать данные второму узлу. Второй узел делает то же самое, снимая второй уровень. Затем данные передаются третьему узлу, который, наконец, может снять последний уровень шифрования - то есть, по сути, расшифровать данные - и передать их получателю. Такой подход гарантирует, что только отправителю будет известна полная информация, связная с транзакцией. Первый узел не является отправителем, не знает получателя и не может расшифровать данные. Второй узел похож на Джона Сноу. Он ничего не знает. Он не знает ни отправителя, ни получателя, и он тоже не может расшифровать данные. Последний узел не знает отправителя, но знает получателя и может расшифровать данные, которые будут ему переданы.

Так мы можем упростить проблему с сетевым подключением, но нам по-прежнему нужно иметь возможность находить других пользователей в сети через их луковый адрес. Для этого нам нужен какой-то объект, какой-то маяк, который будет направлять нас по сети и с помощью какого-то уникального идентификатора сможет указать нам адрес нужного пользователя. И такой уникальный идентификатор не может быть чем-то, что позволит напрямую связать адрес с реальным пользователем. То есть это не может быть номер телефона, адрес электронной почты и даже имя пользователя. Это должно быть что-то случайное и легко утилизируемое. К счастью, сеть Tari работает над использованием открытых ключей, которые являются случайными и легко утилизируемыми, и которые мы сможем использовать для идентификации в сети. Но поскольку я занимаюсь разработкой только мобильных приложений, я не имею полного представления о том, как работает сеть. Поэтому я передаю слово Брайану, который гораздо лучше меня разбирается в этом. Брайан, пожалуйста, расскажи нам, как можно использовать сеть для создания мессенджера?

_**Брайан:**_ Хорошо. Итак, Tari - это решение для первого уровня блокчейна. Мы радикально отличаемся от других крупных игроков - мы не являемс я сайдчейном или чем-то в этом роде. Мы - независимый блокчейн. Также на базе первого мы разрабатываем второй уровень. И когда речь заходит о чате, первый вопрос, который обычно задают, звучит так: "Сообщения будут помещаться в блокчейн?" Ответ однозначен - нет. Мы не будем помещать ваши сообщения в блокчейн. На самом деле мы не используем блокчейн для чего-либо, связанного с чатом. Поэтому давайте поговорим о том, что делает блокчейн, и для чего он используется. И здесь нужно спуститься на уровень ниже и поговорить о том, как блокчейн работает на вашем устройстве.

Когда вы загружаете узел Tari или кошелёк, прежде всего он пытается синхронизировать существующий блокчейн. Синхронизировать или загрузить. И для этого ему нужно - а как уже упоминалось, мы находимся в бессерверной среде, и всё загружается с помощью одноранговых узлов. В чём и состоит суть распределённой сети - то есть нам требуется взаимодействие с другими узлами.

Вернёмся к вопросу Эдриана: как найти другие одноранговые узлы в сети? В Tari в качестве идентификатора мы используем строку эмодзи. Это просто длинная строка эмодзи - довольно забавно, но при этом и анонимно. Как сказал Эдриан, она не привязана к адресу электронной почты, номеру телефона или чему-либо подобному. Далее мы используем сложный механизм, называемый "распределённой таблицей хэшей" или DHT. Опять же, я не стану подробно объяснять, что такое DHT - это более обширная тема. Но если говорить на более высоком уровне, используя плохую аналогию, это похоже на адресную книгу - если вы разорвёте её и раздадите всем по кусочку, то вы всегда сможете найти кого-то, кто знает кого-то другого, у кого, в конечном счёте, будет нужный вам адрес.

Теперь, когда у нас есть все эти связи, мы не просто загружаем цепочку и расслабляемся. Внутри происходят сотни коммуникаций в минуту. Происходят такие вещи, как синхронизация дополнительных блоков, проверка с помощью механизма консенсуса, позволяющая убедиться, что блокчейн действителен. Новые узлы присоединяются и запрашивают информацию блокчейна. Вы реорганизуете вокруг себя узлы, с которыми хотите общаться, чтобы они были ближе. То есть, происходит очень много коммуникаций. Вы можете просто заглянуть в свой кошелёк, чтобы проверить баланс, а за кулисами при этом постоянно будет происходить обмен множеством сообщений, что обеспечивает активность сети.

Знаете ли вы, что в 1984 году был разработан протокол обмена SMS-сообщениями, который, по замыслу телекоммуникационных компаний, должен был использоваться поверх традиционной голосовой линии? По сути, цель состояла в использовании уже существующих каналов передачи голосовых сигналов, которые уже работали довольно хорошо. Единственное, что нужно было добавить, - функцию хранения и пересылки. То есть, было необходимо, чтобы сеть что-то хранила, а затем пересылала. Допустим, вы отправляете мне сообщение, а мой мобильный телефон выключен. Сеть сохраняет это сообщение, а затем, когда я включу телефон, пересылает его мне. Другими словами у них было всё, что нужно,  и реализовать протокол было относительно просто. Но, на самом деле, протокол был реализован только в 1997 году, так что на это ушло несколько лет. Но у них было всё необходимое. И это никак не отличается от того, что сегодня происходит с протоколом Tari. Как только что было сказано, с учётом всех сообщений, которые передаются "под капотом", уже существуют все эти каналы, которые находятся в постоянной связи. И у нас уже есть некий механизм хранения и пересылки, необходимый для любой современной распределённой сети. На данный момент это просто базовая функция, которую необходимо реализовать.

Итак, в нашей сети уже есть всё необходимое для безопасного приватного обмена сообщениями. Всё, что нам нужно было сделать, - найти способ, с помощью которого конечные пользователи могли бы отправлять свои сообщения в каналы передачи. И это проще простого. Это не является чем-то сложным. Наше преимущество заключается в том, что мы можем использовать всё, что уже есть в протоколе. Каждое отправляемое сообщение уже является приватным. Прямая ли это передача от пользователя к пользователю или хранение и пересылка - не имеет значения. Кроме того, как сказал Эдриан, мы используем сеть Tor, и тем самым обеспечиваем дополнительный уровень безопасности. И я думаю, это демонстрирует надёжность платформы. Мы смогли взять существующий протокол и, внеся незначительные изменения, реализовать такую необходимую функцию, как безопасный приватный обмен сообщениями, расширив тем самым функциональность протокола. Я думаю, это наглядно свидетельствует о том, насколько хороша и надёжна наша платформа. Теперь, при использовании безопасного чата, мы получаем всё то, что уже было в сети - безопасность, возможность сетевого обмена данными, и всё это работает довольно хорошо.

_**Эдриан:**_ Хорошо. Теперь, когда у нас есть полная картина, мы можем поговорить о плюсах и минусах нашего подхода.

Итак, первое и главное преимущество подхода заключается в адаптации механизмов обеспечения безопасности, анонимности и конфиденциальности к обмену сообщениями. Безопасность обеспечивается Tor, а всё остальное - самой сетью Tari. Кроме того, заблокировать всю сеть довольно непросто, поскольку централизованные сети похожи на гидру. Чтобы убить её, нужно отрезать все головы. И даже если несколько узлов по какой-то причине будут отключены, вся система будет работать по-прежнему. А со временем, когда в сети появятся новые узлы, заблокировать сеть станет ещё сложнее.

Ну да ладно, ничего не бывает идеальным. Безусловно, помимо плюсов есть и минусы. Давайте коротко рассмотрим их.

Первый минус связан с самой сетью Tor. Как известно, необходимо, чтобы между получателем и отправителем существовало три узла, образующие цепочку. И если какой-либо узел в цепи по какой-либо причине начинает работать медленнее, например, у него возникнут временные проблемы с подключением к Интернету, или же он будет занят обработкой других пакетов данных, то вся транзакция будет проходить немного медленнее, и сообщения будут приходить с задержкой.

Вторая проблема - это безусловный недостаток, который, тем не менее, для некоторых может стать преимуществом. Эта проблема связана с бессерверной природой нашего подхода. У нас не предусмотрено места, где можно было бы хранить ключ к сообщениям. Поэтому, если вы утратите доступ к своему устройству, удалите сообщения вручную или просто захотите начать заново на другом устройстве, вы никак не сможете восстановить ключ к сообщениям.

И последний недостаток также связан с бессерверным решением. Из-за отсутствия серверов мы не сможем восстановить вашу учетную запись каким-либо обычным способом. У нас нет кнопки напоминания пароля, и мы не высылаем ссылки на страницу восстановления. Вместо этого делается то же самое, что и при восстановлении криптокошелька. Требуется записать всю фразу-пароль, хранить её в надежном месте и использовать по необходимости.

Итак, у нас есть все необходимые инструменты. Они доступны, и мы продолжаем расширяться. Теперь нам нужны люди, которые начнут ими пользоваться. Я твёрдо убежден, что даже если результат нашей работы не будет идеальным, она определённо привлечёт внимание, привлечёт пользователей, может быть, даже приведёт к созданию сообщества. А получив обратную связь, мы сможем расширить проект, сделать его ещё лучше и привлечь ещё больше внимания. И мы как Tari хотим помочь в создании такого чата. Возможно, мы даже поднимем планку в этой области.

Нами уже был создан фреймворк, написанный на Rust, позволяющий отправлять и получать сообщения через сеть Tari. Мы находимся в процессе внедрения этой библиотеки в наши мобильные кошельки. Функционал на уровне ранней бета-версии уже доступен для iOS, а в ближайшем будущем будет доступен и для Android. Вы можете скачать её здесь - это ссылка на тестовый сайт. И, конечно, вы можете не доверять мне или Брайану, но вы можете доверять нашему коду, который является открытым и выложен на странице нашего проекта на GitHub. Вы можете всё сами посмотреть и во всём разобраться.

Пожалуй, это всё на сегодня. Спасибо всем за внимание!
