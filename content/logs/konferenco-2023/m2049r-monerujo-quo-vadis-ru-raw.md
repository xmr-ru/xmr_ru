---
title: "m2049r - Куда движется Monerujo?"
date: "2023-06-23"
categories:
  - "Стенограмма"
tags:
  - "Monerotopia 2022"
lead: "Monero Konferenco 2023 #MoneroKon2023 Прага - День 1"
pager: true
toc: false
sidebar: "right"
---

{{< youtube id="_qE1CD3J8oM" autoplay="false" >}}

---

_**m2049r:**_ Как же здесь темно.

Прежде всего, пожалуй, следует сказать о следующем: у нас есть свой стол, и все, кто приходит, спрашивают, как это произносится? Произнесу правильно для всех сразу: Монеруйо - так это звучит на эсперанто. Но поскольку все мы пираты, то можем произносить это как угодно.

Я расскажу о том, на каком этапе работы мы находимся, что происходит, каково положение дел на данный момент в целом.

Итак, мы только что запустили новую версию функции PocketChange, о которой я расскажу позже. Мы немного перегруппировываемся в том смысле, что пытаемся выяснить, как мы хотим двигаться дальше, в какой форме. И я говорю не о команде, а о направлении развития приложения, о выборе дизайна - хотим ли мы прямо сейчас сменить и поддерживать новый дизайн, и тому подобное.

Прошло уже больше года с момента выхода последней основной версии, и именно поэтому доклад называется "Куда мы движемся?", "Как мы движемся?" Причина состоит в том, что нас всего трое: два дизайнера - Андрес, которого вы уже видели сегодня утром, и я, действующий в качестве разработчика. Это, безусловно, одно из самых узких мест - нас всего трое. Кроме того, в прошлом году у всех нас, у всех троих, возникли проблемы на работе и дома, так что год был неспешным в контексте работы над проектом.

Планы на будущее. Когда? Скоро, как обычно. Некоторые вещи будут реализованы раньше, чем другие. Дорожную карту мы посмотрим чуть позже. Мы снова полны энергии, позволяющей вложить больше сил в наш проект. Сегодня, да и вчера тоже мы были рады услышать так много положительных отзывов. А те отзывы, что не столь положительны, точно так же положительны для нас, потому что тоже мы можем воспользоваться ими, и это просто замечательно. Спасибо вам и, если вы хотите что-то сказать нам, пожалуйста, обращайтесь.

Финансирование. Финансирование - это, конечно же, серьёзная тема. Нам не так важны деньги, но мы всё равно их любим. Более года назад, в конце 2021 года, в силу некоторых причин, о которых я, возможно, расскажу позже мы решили отойти от использования CCS и создать собственную децентрализованную систему финансирования, funding.monerujo.app, с помощью которой вы можете увидеть, какие проекты находятся в разработке, увидеть основные этапы - мы производим всевозможные обновления, обновления пользовательского интерфейса и тому подобное, так сказать, бесплатно. Но крупные результаты также уже имеются. И это интересно, поскольку для каждого проекта нами был создан подадрес, и люди могут голосовать с помощью Monero за то, что должно будет делаться дальше. И как только проект будет профинансирован, он, как и в CCS, перейдёт на стадию выполнения.

Дорожная карта. Не знаю, насколько она реальна. Скоро увидим. Но на сегодняшний день именно это считается нашей дорожной картой. Функция PocketChange, работа над которой была завершена на 100%, это то, что было профинансировано год назад, и, наконец, мы нашли время, выбрали дизайн и реализовали всё, как задумывалось.

В чём суть PocketChange? PocketChange позволяет тратить деньги непрерывно. По сути, я могу здесь пить пиво бесконечно и безостановочно, что было невозможно в прошлый раз, когда приходилось ждать пиво в течение 20 минут, и это было так себе. Как это работает - тоже часть этой презентации. Мы развернули функцию пару недель назад на Альфа-канале, и она отлично работает. А в начале этой недели мы реализовали её в основном приложении, и, похоже, всё работает так же успешно. Так что мне удалось выпить очень много пива. Но не сегодня.

Другая вещь, которая финансируется, - доказательство концепции для iOS, которое уже наполовину готово. По сути, это переработка Monerujo в Dart и Flutter, чтобы мы могли использовать одну и ту же кодовую базу для iOS и для Android, что довольно сложно. Это большая работа, и это всего лишь пробный вариант, необходимый для того, чтобы понять, можем ли мы с этим справиться. Достаточно ли я хорош, чтобы написать код? Какие библиотеки нам нужны? Всю инфраструктуру. И большая часть данной работы сводилась к приобретению устройств на базе iOS и понимании того, как они работают. Последний раз я пользовался Mac в 1990... Нет, неправильно - в 87. Да, многое изменилось. Но это всё ещё считается модным, так что… Да. Вот в чём суть этой работы, а когда мы закончим, посмотрим, что делать дальше. Мне известно, что многие ждут этого, и да, это может случиться.

SideKick. SideKick - это фантастический проект, это фантастическая идея. Она заключается в том, чтобы использовать ещё один, второй телефон на базе Android, на который была бы установлена специальная версия Monorujo, в режиме SideKick. Это позволило бы подписывать транзакции точно так же, как это делается, например, в случае с Ledger Nano X, по Bluetooth. Мы также реализовали тот же интерфейс, что и Ledger. Так что вы можете использовать это устройство с любым другим... если версия Monero будет исправлена, точнее, не исправлена, а улучшена для использования этой функции через Bluetooth. Тогда вы сможете использовать её посредством обычного пользовательского интерфейса Monero, официального пользовательского интерфейса или с помощью любого другого кошелька, поддерживающего протокол Ledger. И это очень хорошо, ведь если у вас есть какое-нибудь старое устройство, вы сможете использовать его в качестве кошелька. Преимущество, конечно же, состоит в том, что вам не придётся покупать Ledger. Не то чтобы Ledger - это плохо. Просто никто не будет знать, что вы его используете. Когда вы покупаете кошелек, значит, вы где-то есть, а, как известно, списки клиентов некоторых компаний утекают в сеть. А в данном случае вы будете просто использовать отдельное устройство с такой вот функцией.

Да, эта работа также завершена на 50%. Причина в том, что сначала мы решили проверить, действительно ли всё работает, в чём мы не были уверены. И всё действительно работает. Мы опубликовали заявку на финансирование этой работы в CCS несколько лет назад, и потребовалась целая вечность, чтобы проделать всю эту работу, которая в то время казался странным. Действительно ли проект попадает в CCS? Будет он финансироваться или нет? И произошли две вещи. Во-первых, мы занимались им в имеющееся свободное время, и поэтому он до сих пор не закончен. А во-вторых, мы решили, что система CCS недостаточно гибка, а процесс финансирования сообществом совершенно непрозрачен, и решили пойти своим путём. Именно поэтому мы решили организовать финансирование самостоятельно, и это сработало достаточно хорошо. И да, каждый, кто финансирует один из этих проектов, размещённых на сайте, получает бесплатный NFT. Он разработан и нарисован самим Андресом в общем для всего проекта стиле, и действительно красив.

Что ещё на подходе? В течение последних месяцев, года, полутора лет мы много думали о предпринимателях - как сделать так, чтобы им было проще пользоваться Monero? Каков стандартный сценарий использования Monero в их случае? Мы видели, как это делается здесь. Не знаю, что за этим стоит. Вроде как всё работает нормально, но потом перестает работать, и предприниматели говорят: "Мы больше не принимаем Monero. Только наличные или кредитка, как обычно". И мы хотим сделать или хотя бы придумать, как дать возможность предпринимателям лучше использовать Monero, и каким предпринимателям это нужно? Monerujo сам по себе является "кошельком для улицы", и раз уж это так, то должна быть возможность для покупки с его помощью самых разных товаров. И поэтому нам следует поработать и над другой половиной этого уравнения.

У нас есть биржевой сервис. Сейчас это SideShift, и он работает большую часть времени. Некоторые не довольны им из-за необходимости следовать процедуре KYC, отсутствия возможности использования Tor и ещё некоторых вещей, возможно, долгого времени ожидания получения Bitcoin. Поэтому мы пересматриваем эту функцию, возможно, в направлении поддержки нескольких провайдеров, чтобы вы могли выбрать то, что вам нравится. Если вам нравится пользоваться SideShift, пользуйтесь SideShift. Лично мне этот сервис нравится. Можно выбрать дешёвый вариант, можно стабильный, можно сделать всё, что угодно. Пока мы ищем вариант с проверкой API. Так что у нас будет несколько опций.

И ещё: многие говорят: "Всё это хорошо, но я хочу получать Monero откуда-то ещё, используя Bitcoin, например". Так что, входящие пополнения с бирж, как это делается у других, также является частью нашей работы. Мы хотим сделать это так, чтобы всё соответствовало остальной части приложения и, безусловно, соответствовало этике приложения, и чтобы удобство использования не стало хуже, чем сейчас. Хотя сейчас, как мне кажется, всё вполне удобно, так что...

Далее, мы хотим добавить курсы валют, которым следует чёрный рынок, и сделать это для таких недовалют, как рубли и аргентинское песо, публикуемый курс которых далёк от реального. Есть несколько сайтов, которые предоставляют такие курсы, и мы хотим добавить их параллельно с официальными имеющимися у нас курсами. Сегодня курсы рассчитываются, берутся из Европейского центрального банка и из Kraken. Прямо сейчас у нас есть, не знаю, около 30 валют для сравнения или что-то вроде того. Но нам нужно больше, потому что это "кошелёк для улицы", для людей, которые нуждаются в нём в других странах. Поэтому было бы неплохо, чтобы они знали реальный курс в их местной недовалюте.

Функция PocketChange. Я хочу рассказать о PocketChange, о том, что это за функция, как она работает, и немного о самой реализации. Когда вы получаете сдачу, как известно, вам придётся подождать 10 блоков, чтобы вы могли потратить её снова. И наша идея заключается в создании 10 карманов, в которые вы кладёте немного мелочи, а потом просто тратите из этих 10 карманов, и когда мелочь из первого кармана возвращается, вы можете продолжать тратить из других карманов, а затем, после траты из 10-го кармана, вы можете снова потратить из первого. Такова идея. Идея, выраженная слоганом "Трать всегда и немедленно, не ожидая следующего блока". Некоторые говорят, что карманов должно быть 16, что их должно быть 2 или 13. Я не совсем понимаю, и пока даже не пытался выяснить, откуда берутся эти цифры.

Таким образом, по сути, когда вы включаете функцию PocketChange, первое, что делает кошелёк, чтобы вы могли потратить средства, он проверяет, не пусты ли карманы, и не нужно ли их заполнить. И он заполняет их, я вставил это далее, заполняет их на сумму кратную 10 в зависимости от суммы, выбранной для каждого кармана. А когда вы тратите сумму, которая меньше выбранной вами суммы, он использует только сумму из этого кармана. В этом и заключается идея. Вы можете установить значение 0,1 и безостановочно пить пиво. Или же, если вы хотите купить более дорогое пиво, вы устанавливаете значение, равное 1,3. Почему именно эти числа? Потому что Фибоначчи, как мне думается, - это круто. В общем, в первый раз вы заполняете все карманы, а в последующие - нет. Вы будете заполнять только пустые карманы. Конечно, вы можете пойти и купить дорогое пиво, и тогда оно, вероятно, будет использовать выходы из трёх этих карманов, и в следующий раз, когда вы потратитесь, эти три кармана будут заполнены. Таким образом, размер то увеличивается, то уменьшается в зависимости от ваших привычек. Как задокументировать и объяснить это обычным людям - нам ещё предстоит выяснить, и в данном случае ваш вклад, конечно, будет очень важен и только приветствуется.

Мы включаем эту функцию для каждого счёта. Monerujo поддерживает несколько счетов, поэтому вы можете иметь счёт PocketChange на повседневные нужды, например, для MoneroKon, а остальные счета будут обычными счетами без этой функции. Конечно, вы сможете включить и отключить её в любое время. То есть, вы идёте на конференцию и включаете её, уходите с конференции - отключаете. В итоге вы платите чуть более высокую комиссию, поскольку совершаете больше переводов, чем в случае с простым переводом и сдачей. Здесь есть перевод, перевод в карман и сдача. Поэтому и комиссия немного выше.

Да, "Держите карманы полными". Это чтобы убедиться, что на счёте всё ещё есть средства, и что карманы полны.

Итак, карманы и подадреса - это часть реализации. В основном в качестве карманов выбираются первые 10 подадресов. Интересно, что когда они используются таким образом, API Monero как бы игнорирует это, так что вы не видите входящих транзакций по этим подадресам, что хорошо в нашем случае, поскольку мы можем игнорировать всё остальное и использовать эти подадреса для других своих целей, как если бы это делалось в любом ином случае. Ну а в фоновом режиме эти подадреса используются в качестве карманов.

А причина состоит в том, что когда вы тратите деньги, вы можете выбрать, с каких подадресов будут взяты монеты. В Monero вы не можете выбирать монеты, по крайней мере, в API кошелька, вы должны сказать, с каких подадресов они приходят. А у нас есть карманы, и у нас есть код, который выясняет, в каких карманах есть монеты, которые мы можем использовать, а затем мы говорим Monero использовать именно эти подадреса, чтобы выполнить запрос на трату.

Интерфейс мы стащили у Wownero. Спасибо Wownero! Я увидел его год назад. Это очень простой и очень полезный код, который был нами добавлен. И, возможно, мы добавим его в кодовую базу Wownero, потому что благодаря ему вы сможете увидеть, какие монеты у вас есть и где они находятся, а без него всё стало бы сложнее, или вам просто пришлось бы гадать, есть ли на подадресах что-то или нет.

Да. Вот как сейчас это работает. Ведутся дискуссии и высказываются мнения о том, что всё должно быть по-другому. Да, мы можем сделать всё по-другому. Давайте поговорим о том, как сделать это и для чего. Сейчас это 10 карманов с возможностью выбора суммы. Может быть, мы добавим возможность выбора количества карманов. Я не уверен, будет ли это преимуществом с точки зрения пользователя или нет. Безусловно, мы открыты для любых обсуждений, но пока всё так, как есть. Так и работает. Отзывы, которые мы получили, особенно здесь, видимо, из-за пива, были положительные.

Проблемы. В настоящее время их не так много. Разве что, действительно, интерфейс у Cake привлекательней. Ну да ладно. Это не проблема. Это просто жизненный фактор.

Интеграция с Orbot. Интеграция с Orbot работает, и даже очень хорошо, если вы знаете, как этим пользоваться, что является болевой точкой. И в этом направлении нам необходимо организовать что-то вроде обучения, с одной стороны, а с другой - мы должны дать возможность не использовать Orbot, а использовать свой собственный прокси, какой вам нравится, будь то Tor, будь то I2P или что-то ещё. Опытные пользователи должны иметь возможность делать всё, что они захотят, а неопытные - нажимать на кнопку с соответствующим сервисом. Может, наконец, мы сможем создать мануал для YouTube, которого у нас сейчас нет, или, может быть, кто-то из вас сможет добавить руководство, как правильно всем этим пользоваться. Но в любом случае мы должны проработать этот вопрос и понять, как сделать всё удобным, потому что Tor очень важен для многих из вас, и мы хотели бы сделать это.

Здесь же добавлю, что мы запустили Orbot. Была проделана большая работа по его интеграции. Почему его нет в приложении, самого Tor, Потому что это вопрос безопасности, и я не думаю, что мы сможем быть в курсе всех изменений, которые могут быть в него внесены. Так что Orbot должен стать максимально безопасным, а мы должны сделать всё возможное, чтобы стать самым лучшим кошельком Monero.

Недостатком является то, что API Orbot не позволяет отключить его. Когда мы запускаем Orbot в приложении, мы не можем затем его выключить, и он продолжает работать в фоновом режиме. Есть разные мнения по этому поводу - стоит его отключать или нет, потому что, возможно, Orbot используется для чего-то другого, и мы не можем, не должны его отключать, потому что при выходе в чистую сеть могут случиться разные нехорошие вещи. Так что нам здесь есть что обдумать.

Проблема повреждённого кэша. Возможно, вы с ней сталкивались, хоть и очень редко. Лично я с ней столкнулся всего один раз за всё время работы Monerujo: вы запускаете кошелёк, и он выдаёт вам что-то вроде "неверное имя пользователя" или "неверный пароль", что на самом деле не имеет никакого отношения к имени пользователя, паролю, но зато связано с повреждённым файлом кэша в телефоне. Я пытался его отладить, но в основном он просто не читается. Так что он был повреждён, и возникали некоторые проблемы. Мы исправили это год назад или около того, сделав так, чтобы файл не записывался в одно и то же время. Это был какой-то баг, полагаю. Это всё ещё происходит, но очень и очень редко. Но почему? Это настоящая головная боль, поскольку теряются узлы, имена подадресов и тому подобное.

Поэтому следует создавать резервные копии, о чём не сказано в моих слайдах. Это ещё одна болевая точка, поскольку резервные копии шифруются с помощью CrazyPass - суперзащищённого пароля, который следует записывать, что не очень понятно, так как он указан на странице секретов. И с помощью этого пароля CrazyPass вы можете использовать резервную копию, вы можете использовать эти файлы даже в обычном клиенте Monero, официальном GUI, официальном клиенте с поддержкой командной строки. И с помощью CrazyPass вы можете восстановить их на новом телефоне или на том же телефоне, но уже с помощью вашего обычного пароля.

Думаю, на этом всё. Спасибо за внимание.
